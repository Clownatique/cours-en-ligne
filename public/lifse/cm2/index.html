<script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><h2 id="introduction-types-de-memoires">introduction (types de memoires)</h2>
<p>presentations des types de peripheriques</p>
<h2 id="comment-est-mis-la-memoire">comment est mis la memoire</h2>
<h3 id="le-stockage-physique">le stockage physique</h3>
<p>on peut voir comme un gros tableau avec des decoupages</p>
<h3 id="le-stockage-vue-par-lend-user">le stockage vue par lend user</h3>
<p>un fichier est un gros tableau doctets
un fichier a des attributs (date de creation, dernier acces, permission)</p>
<p>tout ces attributs sont fournis grace au systeme de fichier</p>
<h2 id="systeme-de-fichier">systeme de fichier</h2>
<p>mais c bcp de choses un systeme de fichier non ?</p>
<p>oui, c fourni par l&rsquo;os (c un composant)
concretement la memoire est represente par des structures de donnes diverses (btree, inoeuds, block)</p>
<p>l&rsquo;os fournit effectivement des appels systemes pour lire a une adresse precise, etc&hellip;</p>
<h2 id="les-fichiers">les fichiers</h2>
<h3 id="types-et-format-de-fichiers">types et format de fichiers</h3>
<h4 id="format-de-fichier-type-mime">format de fichier (type mime)</h4>
<p>2 grands formats possibles(trouvable avec la commande file)
se remarque par:</p>
<ul>
<li>lextension sur windows,</li>
<li>magic number(place en debut de fichier) sur linux (et aussi avec lextension)</li>
</ul>
<h5 id="lisibles">lisibles</h5>
<p>(avec un encodage, mais decodable nativement =&gt; on peut utiliser iconv pour changer cet encodage)
ce format change selon l&rsquo;os, s/o les symboles speciaux (retour a la ligne qui differe notamment)</p>
<h5 id="binaires-et-executables">binaires et executables</h5>
<p>le format des binaires peut etre de l&rsquo;elf (comme dans strangers things mdrrrr)
cela varie selon le processeur et larchitecture globalement
!! on peut aussi avoir des scripts ecrits consideres comme des executables grace a un shebang</p>
<p><strong>shebang</strong>: <code>#!/chemin/vers/executeur</code></p>
<p>on peut utiliser la commande hexdump pour voir un binaire</p>
<h4 id="type-de-fichier-binairerepertoirelien">type de fichier (binaire,repertoire,lien)</h4>
<p>sous unix, tout est fichier (meme ta carte graphique)</p>
<p>le type de fichier est indique sur le premier caractere quand on fait ls ou les possibilites</p>
<ul>
<li>(-) fichiers reguliers : donne ou progrannes (binaire*)</li>
<li>(l) lien -&gt; source</li>
<li>(d) dossier (directory you understand :p)</li>
<li>(c) pipe, sockets (se trouvent generalement dans /dev/)</li>
<li>(b) bloc de donnees (utiles pour les fichiers de partition)</li>
</ul>
<h3 id="mode-de-lecture-des-fichiers">mode de lecture des fichiers</h3>
<h4 id="acces-sequentiel">acces sequentiel</h4>
<h4 id="acces-indexe">acces indexe</h4>
<p>/!: A RATTRAPER</p>
<h4 id="comment-utiliser-ces-fichiers-">comment utiliser ces fichiers ?</h4>
<p>avec des appels systemes (comme ceux avec fstream, et les fichiers reguliers)
il y a aussi des fichiers crees par des appels systeme (qui sont interessant a manipuler)</p>
<p>quand on ouvre un fichier, on dispose de 3 descripteur de fichiers</p>
<ul>
<li>0</li>
<li>1</li>
<li>2</li>
</ul>
<h4 id="open">open()</h4>
<p>fonction posix pour ouvrir un fichier.</p>
<p>open(pathfilename, flags) -&gt; renvoie un entier</p>
<ul>
<li>
<p>dans pathfilename on a le chemin du fichier</p>
</li>
<li>
<p>dans les flags on doit preciser si on veut lire, ecrire, ou lire ecrire
on peut aussi preciser si on veut vider le fichier, afficher la suite</p>
</li>
</ul>
<p>=&gt; alors oui je pourrais faire des flashcarte sur tout les flags possible, mais ce serait trop long.</p>
<p>je devrais plutot savoir que man</p>
<h4 id="write-via-un-descripteur-de-fichier">write (via un descripteur de fichier)</h4>
<p>write(descripteur de fichier, adresse,nombre doctets ecrits voulu) -&gt; renvoie le nombre doctets ecrit</p>
<p>si rien na ete ecrit et que le res c 0:(0,0001% des cas )</p>
<h4 id="read-via-un-descripteur-de-fichier">read (via un descripteur de fichier)</h4>
<p>read(descripteur de fichier, adresse,nombre doctets lu voulu) -&gt; renvoie le nombre doctets lu</p>
<p>si rien na ete lu on a voulu lire la fin du fichier</p>
<h4 id="close-c-important-de-le-faire">close c important de le faire</h4>
<h2 id="systeme-de-fichiers">systeme de fichiers</h2>
<h3 id="rappel-avec-le-disque-dur-physique">rappel avec le disque dur physique</h3>
<p>un hdd c des disques magnetiques rigides, et ld hdd nest capable de lire que des petites portions:
il faut le moins possible le fragmenter</p>
<h3 id="exemple-de-ce-que-va-faire-un-systeme-de-fichier">exemple de ce que va faire un systeme de fichier</h3>
<ul>
<li>il va adresser chaque bloc</li>
<li>trouver de la place pour de nouveaux fichiers</li>
<li>pour chaque fichiers, bien considerer les bons blocs</li>
</ul>
<p>en fat (file allocation table) le systeme de fichier retient simplement ladresse du premier bloc. les prochaines adresses sont notes a la fin des blocs</p>
<p>avec des inoeuds (ext4 il me semble)
le systeme de fichiers utilise plein de mini fichiers</p>
<p>ce systeme de fichiers ne retient PAS le nom des fichiers (ils sont seulement dans les repertoires)</p>
<p>ext4 est plus complexe, mais plus extensible</p>
<h2 id="gestion-des-droits">gestion des droits</h2>
<h2 id="heading"></h2>
